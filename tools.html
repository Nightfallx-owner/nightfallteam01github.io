<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Red Hacker Instrument Terminal</title>

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
 background:#050000;
 color:#ff2a2a;
 font-family:Consolas,monospace;
 overflow:hidden;
}

/* BG */
canvas{position:fixed;inset:0;z-index:-1}

/* TOP */
.top{
 position:fixed;top:0;left:0;width:100%;
 padding:10px 20px;
 background:rgba(0,0,0,.85);
 border-bottom:1px solid #300;
 display:flex;
 justify-content:space-between;
 z-index:10;
}
.top a{color:#ff2a2a;text-decoration:none;opacity:.7}

/* TERMINAL */
.terminal{
 margin:70px auto;
 width:90%;max-width:900px;
 background:#000;
 border:1px solid #400;
 padding:15px;
 box-shadow:0 0 40px rgba(255,40,40,.2);
}
.output{
 height:260px;
 overflow-y:auto;
 font-size:14px;
}
.input-line{display:flex;margin-top:10px}
.prompt{margin-right:6px}
input{
 flex:1;
 background:#000;
 border:none;
 color:#ff2a2a;
 outline:none;
}

/* OVERLAY */
.overlay{
 position:fixed;inset:0;
 background:rgba(0,0,0,.96);
 display:none;
 align-items:center;
 justify-content:center;
 z-index:20;
}

.instrument{display:flex;gap:10px}

/* KEYS */
.key{
 width:60px;height:220px;
 background:#080000;
 border:1px solid #ff2a2a;
 color:#ff2a2a;
 display:flex;
 align-items:flex-end;
 justify-content:center;
 padding-bottom:10px;
 transition:.08s;
}
.key.active{
 background:#ff2a2a;
 color:#000;
}
</style>
</head>
<body>

<canvas id="bg"></canvas>

<div class="top">
 <a href="#">â¬… BACK</a>
 <div>RED HACKER TERMINAL</div>
</div>

<div class="terminal">
 <div class="output" id="out">
  <div>Commands: help | sudo piano | sudo guitar | exit</div>
 </div>
 <div class="input-line">
  <span class="prompt">root@ai:~$</span>
  <input id="cmd" autofocus>
 </div>
</div>

<div class="overlay" id="overlay">
 <div class="instrument" id="instrument"></div>
</div>

<script>
/* ===== TERMINAL ===== */
const out=document.getElementById("out");
const cmd=document.getElementById("cmd");
const overlay=document.getElementById("overlay");
const instrument=document.getElementById("instrument");

let mode=null;

/* audio */
const ctx=new (window.AudioContext||window.webkitAudioContext)();
function sound(freq){
 const o=ctx.createOscillator();
 const g=ctx.createGain();
 o.type="sawtooth";
 o.frequency.value=freq;
 g.gain.value=0.6;       // OVOZ BALAND
 o.connect(g);
 g.connect(ctx.destination);
 o.start();
 o.stop(ctx.currentTime+0.25);
}

/* terminal input */
cmd.onkeydown=e=>{
 if(e.key==="Enter"){
  run(cmd.value.toLowerCase());
  cmd.value="";
 }
};

function log(t){
 out.innerHTML+=`<div>${t}</div>`;
 out.scrollTop=out.scrollHeight;
}

function run(c){
 log("root@ai:~$ "+c);
 if(c==="help") log("sudo piano | sudo guitar | exit");
 if(c==="sudo piano") openPiano();
 if(c==="sudo guitar") openGuitar();
 if(c==="exit"){
  overlay.style.display="none";
  instrument.innerHTML="";
  mode=null;
  log("Exited instrument mode");
 }
}

/* PIANO */
function openPiano(){
 mode="piano";
 overlay.style.display="flex";
 instrument.innerHTML="";
 ["A","S","D","F","G","H","J"].forEach(k=>{
  const d=document.createElement("div");
  d.className="key";
  d.textContent=k;
  instrument.appendChild(d);
 });
 log("ðŸŽ¹ Piano: A S D F G H J");
}

/* GUITAR */
function openGuitar(){
 mode="guitar";
 overlay.style.display="flex";
 instrument.innerHTML="";
 ["Q","W","E","R","T","Y"].forEach(k=>{
  const d=document.createElement("div");
  d.className="key";
  d.textContent=k;
  instrument.appendChild(d);
 });
 log("ðŸŽ¸ Guitar: Q W E R T Y");
}

/* KEYBOARD PLAY */
document.onkeydown=e=>{
 if(!mode) return;

 const piano={
  a:261,s:294,d:329,f:349,g:392,h:440,j:493
 };
 const guitar={
  q:110,w:147,e:196,r:247,t:330,y:392
 };

 let freq=null;
 if(mode==="piano") freq=piano[e.key];
 if(mode==="guitar") freq=guitar[e.key];
 if(!freq) return;

 sound(freq);

 const el=[...document.querySelectorAll(".key")]
  .find(x=>x.textContent.toLowerCase()===e.key);
 el?.classList.add("active");
 setTimeout(()=>el?.classList.remove("active"),120);
};

/* PARTICLES */
const c=document.getElementById("bg"),x=c.getContext("2d");
let w=c.width=innerWidth,h=c.height=innerHeight,p=[];
onmousemove=e=>{
 for(let i=0;i<2;i++)
 p.push({x:e.x,y:e.y,vx:(Math.random()-.5),vy:(Math.random()-.5),l:60});
};
function anim(){
 x.clearRect(0,0,w,h);
 p.forEach((o,i)=>{
  o.x+=o.vx;o.y+=o.vy;o.l--;
  x.fillStyle="#ff2a2a";
  x.fillRect(o.x,o.y,2,2);
  if(o.l<0)p.splice(i,1);
 });
 requestAnimationFrame(anim);
}
anim();
onresize=()=>{w=c.width=innerWidth;h=c.height=innerHeight};
</script>

</body>
</html>
